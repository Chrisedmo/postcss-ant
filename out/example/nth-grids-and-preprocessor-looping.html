<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>nth Grids and Preprocessor Looping | postcss-ant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <!--[if IE]>
      <div class="browserupgrade"><p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p></div>
    <![endif]-->


    <div class="overlay"></div>

    <button class="sidebar-button">
      <span>
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>

    <div class="wrap">
      <div class="sidebar">
        <a href="https://github.com/corysimmons/postcss-ant" class="logo">
          <img src="/img/postcss-ant-logo.svg">
        </a>

        <p>
          A size-getting function that accepts fractions, decimals, fixed numbers, and everything <b>in-between</b>.
        </p>

        <p>
          By the guy who built Jeet and Lost.
        </p>

        <nav>
          <h3>Introduction</h3>
          <div class="submenu">
            <a href="/#what-is-ant">What is ant?</a>
            <a href="/#api">API</a>
            <a href="/#postcss-ant-vs-flexbox">postcss-ant vs Flexbox</a>
            <a href="/#flexboxs-strengths">Flexbox's Strengths</a>
            <a href="/#why-postcss">Why PostCSS?</a>
            <a href="/#postcss-calc">postcss-calc</a>
            <a href="/#browser-support">Browser Support</a>
          </div>

          <h3>Usage</h3>
          <div class="submenu">
            <a href="/usage#integrations">Integrations</a>
            <a href="/usage#postcss-cli">postcss-cli</a>
            <a href="/usage#nodejs">Node.js</a>
            <a href="/usage#gulp">Gulp</a>
            <a href="/usage#contribute-your-own-integration">Contribute your own integration</a>
          </div>

          <h3>Examples</h3>
          <div class="submenu">
            <a href="/example/basic-usage">Basic Usage</a>
            <a href="/example/nth-grids-and-preprocessor-looping">nth Grids and Preprocessor Looping</a>
            <a href="/example/negative-margin-grids">negative-margin Grids</a>
            <a href="#">
              Combined with Flexbox
              <span class="coming-soon">
                <span>
                  Coming<br>
                  Soon
                </span>
              </span>
            </a>
            <a href="#">
              Combined with The Grid Layout Spec
              <span class="coming-soon">
                <span>
                  Coming<br>
                  Soon
                </span>
              </span>
            </a>
          </div>
        </nav>
      </div>

      <main>
        <h2 id="nth-grids-and-preprocessor-looping">nth Grids and Preprocessor Looping</h2>

<p>There are 2 types of popular grid systems:</p>

<ol>
  <li>negative-margin grids like Bootstrap. They can accept elements of varying sizes, but produce extra markup (sometimes a lot).</li>
  <li>nth grids like Jeet. They use <code class="highlighter-rouge">nth</code> selectors to have light markup, but can be hard to work with when using elements of varying sizes.</li>
</ol>

<p>There is no perfect balance and <strong>you should always pick the system you need for the job</strong>. If you’re making a gallery of pictures and want it to have a mosaic look, a negative-margin grid is probably your best bet. In most cases you can get away with light-markup nth grids.</p>

<p><em>Preprocessor loops + nth-grids + ant</em> introduce something new to the grid game: light markup and irregular, though patterned, grids. Not perfect (since you still need to know how many elements per row), but a new tool for the toolbox that can completely replace old nth grids.</p>

<p>In nth grids you might specify a 3-column grid as such:</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nc">.row</span> <span class="p">{</span>
  <span class="k">@include</span> <span class="nd">clearfix</span><span class="p">;</span>
<span class="p">}</span>

<span class="nc">.column</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">100%</span> <span class="o">*</span> <span class="m">1</span><span class="o">/</span><span class="m">3</span> <span class="nf">-</span> <span class="p">(</span><span class="m">30px</span> <span class="o">-</span> <span class="m">30px</span> <span class="o">*</span> <span class="m">1</span><span class="o">/</span><span class="m">3</span><span class="p">));</span> <span class="c1">// the last bit trims the size so you can fit a gutter
</span>  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span> <span class="c1">// the aforementioned gutter
</span>
  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span> <span class="c1">// remove the gutter from the last element of each row
</span>  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span> <span class="c1">// useful when elements of varying height are involved. makes sure rows line-break as expected.
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>There are grid systems out there that will do this for you (e.g. Lost), but they do too much and are punished for it. They assume you’re bad at CSS and assign all this code for you. This is great when you have elements that are supposed to be the exact same size, but gets pretty hairy when you want to mix it up.</p>

<p>Say you want the middle elements to become <code class="highlighter-rouge">4/6</code> and the flanking elements to be <code class="highlighter-rouge">1/6</code> each. You can do this fairly easily with some neat nth selectors.</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nc">.column</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>

  <span class="c1">// these will get the 1st and 3rd elements of every row (if there are 3 elements per row)
</span>  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">),</span>
  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">3</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">100%</span> <span class="o">*</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span> <span class="nf">-</span> <span class="p">(</span><span class="m">30px</span> <span class="o">-</span> <span class="m">30px</span> <span class="o">*</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">2</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">100%</span> <span class="o">*</span> <span class="m">4</span><span class="o">/</span><span class="m">6</span> <span class="nf">-</span> <span class="p">(</span><span class="m">30px</span> <span class="o">-</span> <span class="m">30px</span> <span class="o">*</span> <span class="m">4</span><span class="o">/</span><span class="m">6</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>In previous grid systems, this kinda stuff required doing weird stuff in those grid systems’ mini-languages, and the bloat got <strong>bad</strong> with countless unanswerable issues revolving around the issue of bloat.</p>

<p>ant’s different and this is why its called a “size-getter” instead of a grid system. It does all that grid-friendly math above for you and simply returns a <code class="highlighter-rouge">calc</code> formula. You do what you want with it. Widths, heights, rocket-ship dimensions, whatever.</p>

<p>Here’s that example above using ant for the math:</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nc">.column</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="m">6</span> <span class="m">4</span><span class="o">/</span><span class="m">6</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)[</span><span class="m">1</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">2</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="m">6</span> <span class="m">4</span><span class="o">/</span><span class="m">6</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)[</span><span class="m">2</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">3</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="m">6</span> <span class="m">4</span><span class="o">/</span><span class="m">6</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">)[</span><span class="m">3</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Notice how we broke the <code class="highlighter-rouge">(3n + 1)</code> and <code class="highlighter-rouge">(3n + 3)</code> selectors apart? They’re essentially returning the same size. This was intentional.</p>

<p>With preprocessors, we can stash that list of sizes in a variable:</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nc">.column</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>

  <span class="nv">$sizes</span><span class="p">:</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span> <span class="m">4</span><span class="o">/</span><span class="m">6</span> <span class="m">1</span><span class="o">/</span><span class="m">6</span><span class="p">;</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="nv">$sizes</span><span class="p">)[</span><span class="m">1</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">2</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="nv">$sizes</span><span class="p">)[</span><span class="m">2</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">3</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="nv">$sizes</span><span class="p">)[</span><span class="m">3</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">3n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Now if we make any changes to the sizes, we can just tweak them in that one spot. And since we broke apart the selectors, they will always work. For instance, we could simply adjust <code class="highlighter-rouge">$sizes</code> to <code class="highlighter-rouge">2/6 3/6 1/6</code> and it’d work great.</p>

<p>But what happens if you want a grid with many elements per row? Writing all those <code class="highlighter-rouge">nth-child</code> selectors becomes pretty tedious really fast. This is where loops really make ant amazing.</p>

<h4 id="preprocessor-looping-spannth-gridsspan">Preprocessor Looping: <span>nth grids</span></h4>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"grid"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"column"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"column"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"column"</span><span class="nt">&gt;</span>3<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"column"</span><span class="nt">&gt;</span>4<span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"column"</span><span class="nt">&gt;</span>5<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>
</div>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nc">.column</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>

  <span class="nv">$sizes</span><span class="p">:</span> <span class="m">1</span><span class="o">/</span><span class="m">15</span> <span class="m">2</span><span class="o">/</span><span class="m">15</span> <span class="m">3</span><span class="o">/</span><span class="m">15</span> <span class="m">4</span><span class="o">/</span><span class="m">15</span> <span class="m">5</span><span class="o">/</span><span class="m">15</span><span class="p">;</span>

  <span class="k">@for</span> <span class="nv">$i</span> <span class="n">in</span> <span class="m">1</span> <span class="ow">through</span> <span class="m">5</span> <span class="p">{</span>
    <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">5n</span> <span class="o">+</span> <span class="err">$</span><span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
      <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="nv">$sizes</span><span class="p">)[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">5n</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">5n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<div class="example-loops-1">
  <div class="grid">
    <div class="column">1</div>
    <div class="column">2</div>
    <div class="column">3</div>
    <div class="column">4</div>
    <div class="column">5</div>
  </div>
</div>

<p>Let’s put this in perspective… You just made one of those sick “A List Apart” asymmetrical, content-out thingy, grids in a few lines of code, that produces the minimal amount of markup and CSS output possible, works in IE8 (with a selector and calc polyfill, as found in Boy), and loops down infinitely without superfluous “row” markup.</p>

<p>Want to tweak the gutter? You could put it directly in that loop, but lets stash it in a variable (we might use it somewhere else?).</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nc">.column</span> <span class="p">{</span>
  <span class="nl">float</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="nl">margin-right</span><span class="p">:</span> <span class="m">30px</span><span class="p">;</span>

  <span class="nv">$sizes</span><span class="p">:</span> <span class="m">1</span><span class="o">/</span><span class="m">15</span> <span class="m">2</span><span class="o">/</span><span class="m">15</span> <span class="m">3</span><span class="o">/</span><span class="m">15</span> <span class="m">4</span><span class="o">/</span><span class="m">15</span> <span class="m">5</span><span class="o">/</span><span class="m">15</span><span class="p">;</span>
  <span class="nv">$gutter</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>

  <span class="k">@for</span> <span class="nv">$i</span> <span class="n">in</span> <span class="m">1</span> <span class="ow">through</span> <span class="m">5</span> <span class="p">{</span>
    <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">5n</span> <span class="o">+</span> <span class="err">$</span><span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
      <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="nv">$sizes</span><span class="o">,</span> <span class="nv">$gutter</span><span class="p">)[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">5n</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">margin-right</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="nt">5n</span> <span class="o">+</span> <span class="nt">1</span><span class="o">)</span> <span class="p">{</span>
    <span class="nl">clear</span><span class="p">:</span> <span class="nb">left</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<div class="example-loops-2">
  <div class="grid">
    <div class="column">1</div>
    <div class="column">2</div>
    <div class="column">3</div>
    <div class="column">4</div>
    <div class="column">5</div>

    <div class="column">1</div>
    <div class="column">2</div>
    <div class="column">3</div>
  </div>
</div>

<p>Note: This should stop on the 3rd element of the 2nd row to demonstrate it doesn’t unintentionally expand to fill the rest of the container like <code class="highlighter-rouge">flex-grow: 1</code> would.</p>

      </main>
    </div>

    <script src="/js/lib/zepto.min.js"></script>
    <script src="/js/main.js"></script>
  </body>
</html>
