<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Usage | postcss-ant üêú</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/postcss-ant/css/style.css">
  </head>
  <body>
    <!--[if IE]>
      <div class="browserupgrade"><p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p></div>
    <![endif]-->

    <div class="overlay"></div>

    <button class="sidebar-button">
      <span>
        <span></span>
        <span></span>
        <span></span>
      </span>
    </button>

    <div class="wrap">
      <div class="sidebar">
        <a href="https://github.com/corysimmons/postcss-ant" class="logo">
          <img src="/postcss-ant/img/postcss-ant-logo.svg">
        </a>

        <p>
          A size-getting function that accepts fractions, decimals, fixed numbers, and everything <b>in-between</b>.
        </p>

        <p>
          By the guy who built Jeet and Lost.
        </p>

        <nav>
          <h3>Introduction</h3>
          <div class="submenu">
            <a href="/postcss-ant/#what-is-ant">What is ant?</a>
            <a href="/postcss-ant/#installation">Installation</a>
            <a href="/postcss-ant/#api">API</a>
            <a href="/postcss-ant/#postcss-ant-vs-flexbox">postcss-ant vs Flexbox</a>
            <a href="/postcss-ant/#flexboxs-strengths">Flexbox's Strengths</a>
            <a href="/postcss-ant/#why-postcss">Why PostCSS?</a>
            <a href="/postcss-ant/#postcss-calc">postcss-calc</a>
            <a href="/postcss-ant/#why-9999-and-99999999">Why 99.99% and 99.999999?</a>
            <a href="/postcss-ant/#browser-support">Browser Support</a>
          </div>

          <h3>Usage</h3>
          <div class="submenu">
            <a href="/postcss-ant/usage#preprocessors-and-postcss">Preprocessors and PostCSS</a>
            <a href="/postcss-ant/usage#integrations">Integrations</a>
            <a href="/postcss-ant/usage#postcss-cli">postcss-cli</a>
            <a href="/postcss-ant/usage#nodejs">Node.js</a>
            <a href="/postcss-ant/usage#gulp">Gulp</a>
            <a href="/postcss-ant/usage#contribute-your-own-integration">Contribute your own integration</a>
          </div>

          <h3>Examples</h3>
          <div class="submenu">
            <a href="/postcss-ant/example/basic-usage">Basic Usage</a>
            <a href="/postcss-ant/example/nth-grids-and-preprocessor-looping">nth Grids and Preprocessor Looping</a>
            <a href="/postcss-ant/example/negative-margin-grids">negative-margin Grids</a>
            <a href="#">
              Combined with Flexbox
              <span class="coming-soon">
                <span>
                  Coming<br>
                  Soon
                </span>
              </span>
            </a>
            <a href="#">
              Combined with The Grid Layout Spec
              <span class="coming-soon">
                <span>
                  Coming<br>
                  Soon
                </span>
              </span>
            </a>
          </div>
        </nav>
      </div>

      <main>
        <h2 id="preprocessors-and-postcss">Preprocessors and PostCSS</h2>

<p>Preprocessors can be used with PostCSS in a variety of ways, and you should really take the time to learn how to use your favorite preprocessor with PostCSS.</p>

<h4 id="postcss-parsers">PostCSS Parsers</h4>

<p>The PostCSS community has rebuilt a lot of preprocessor functionality into custom plugins. You can use SCSS syntax with a plugin like PreCSS and a parser like postcss-scss (you need both).</p>

<p>It‚Äôs <strong>not the same thing as SCSS</strong> so you need to use special syntax (e.g. <code class="highlighter-rouge">@define-mixin</code> rather than <code class="highlighter-rouge">@mixin</code>) and the output looks pretty gross sometimes. Quite a bit of the functionality from Sass has been ported over, but you might end up missing some of Sass‚Äô built-in functions that haven‚Äôt been ported over.</p>

<p>Here‚Äôs a sample ant grid loop using SCSS-like syntax:</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="nt">div</span> <span class="p">{</span>
  <span class="nv">$sizes</span><span class="p">:</span> <span class="m">1</span><span class="o">/</span><span class="m">4</span> <span class="m">1</span><span class="o">/</span><span class="m">2</span> <span class="m">1</span><span class="o">/</span><span class="m">4</span><span class="p">;</span>

  <span class="k">@for</span> <span class="nv">$i</span> <span class="ow">from</span> <span class="m">1</span> <span class="ow">through</span> <span class="m">3</span> <span class="p">{</span>
    <span class="k">&amp;</span><span class="nd">:nth-child</span><span class="o">(</span><span class="err">$</span><span class="nt">i</span><span class="o">)</span> <span class="p">{</span>
      <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="nv">$sizes</span><span class="p">)[</span><span class="nv">$i</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>To get this to parse with postcss-scss, you need to do the following:</p>

<ul>
  <li><code class="highlighter-rouge">npm i -D postcss postcss-cli postcss-ant precss postcss-scss</code></li>
  <li>Create an <code class="highlighter-rouge">in.scss</code> file with the SCSS above.</li>
  <li><code class="highlighter-rouge">node_modules/.bin/postcss -u precss -p postcss-scss -u postcss-ant -o out.css in.scss</code></li>
</ul>

<p>Again, the output will look pretty gross, but you should be minifying your final CSS anyway so it works pretty well.</p>

<h4 id="preprocess-then-postcss">Preprocess THEN PostCSS</h4>

<p>The PostCSS community gets upset when you talk about doing this because it breathes life back into preprocessor development, but you can send your stylesheets directly through their respective processor, output a <code class="highlighter-rouge">.css</code> file (or stdout), and THEN parse over that data with your PostCSS plugins.</p>

<p>This technique is slower than using PostCSS‚Äô parsers, but I kind of like it because the PostCSS parsers are pretty half-assed in comparison to the actual preprocessors (missing functionality, differing syntaxes, ugly output).</p>

<p>Another caveat to be aware of is PostCSS custom syntaxes will frequently cause the preprocessor to error. For instance, SCSS has no idea what <code class="highlighter-rouge">ant()[]</code> is, so when it reaches <code class="highlighter-rouge">[]</code> it throws an error. You can work around this by using Sass‚Äô <code class="highlighter-rouge">unquote()</code> function liberally: <code class="highlighter-rouge">width: unquote('ant(') $sizes unquote(')[') $i unquote(']');</code>.</p>

<p>In Stylus you use a sprintf-like function to make this a bit better: <code class="highlighter-rouge">width: 'ant(%s)[%s]' % $sizes $i</code>. I‚Äôm not sure if Sass has a sprintf-like function. Please ping me in issues if you know of a better solution.</p>

<p><em>Note: This ‚Äúescaping in preprocessors‚Äù problem has been ongoing since preprocessors were invented. I just started working on a few solutions to this dilemma that should launch before the end of Sept. 2016.</em></p>

<h4 id="poststylus">PostStylus</h4>

<p>PostStylus actually does run through Stylus directly, but still runs into problems with custom syntaxes. I might be using it incorrectly so please ping me in issues if PostStylus can be used alongside custom syntaxes like the <code class="highlighter-rouge">ant()</code> function.</p>

<h4 id="sugarss">SugarSS</h4>

<p>Instead of making an official postcss-stylus parser, SugarSS was developed as PostCSS‚Äô official preprocessor. It has Stylus-like syntax and works well with PostCSS plugins that introduce new syntax, but it‚Äôs very new and is missing a ton of nice sugar preprocessors already have (like you‚Äôre expected to replace <code class="highlighter-rouge">lighten()</code> with the W3C‚Äôs garbage <code class="highlighter-rouge">color()</code> function‚Ä¶ pfft).</p>

<p>That said, SugarSS combines processing speed with beautiful indentation syntax and will parse custom PostCSS functions without flinching. I used SugarSS on the creation of this website. If you‚Äôre interested in looking at the code, check it out in the postcss-ant GitHub repo‚Äôs <code class="highlighter-rouge">gh-pages</code> branch.</p>

<h2 id="integrations">Integrations</h2>

<p>ant is a PostCSS plugin. PostCSS is a JavaScript program that looks at input CSS, alters it, and spits out some output CSS. Autoprefixer is a good example of a PostCSS plugin you‚Äôre probably familiar with. It looks at an input file for CSS <em>declarations</em> (e.g. <code class="highlighter-rouge">transform: rotate(90deg);</code>) and when it stumbles upon one that matches its set of rules, it alters it and spits out an output file with slightly different CSS.</p>

<p>Kind of like preprocessor mixins, except with all the power of JavaScript. It can be a little tricky to use at first, but is well worth taking a coffee break to tinker with.</p>

<p>These bare-bones, step-by-step, examples should result in the following input and output.</p>

<div class="language-scss highlighter-rouge"><pre class="highlight"><code><span class="c1">// input
</span><span class="nt">a</span> <span class="p">{</span> <span class="nl">width</span><span class="p">:</span> <span class="nf">ant</span><span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="m">2</span><span class="p">)[</span><span class="m">1</span><span class="p">];</span> <span class="p">}</span>

<span class="c1">// output
</span><span class="nt">a</span> <span class="p">{</span> <span class="nl">width</span><span class="p">:</span> <span class="nf">calc</span><span class="p">(</span><span class="m">99</span><span class="mi">.99%</span> <span class="o">*</span> <span class="m">1</span><span class="o">/</span><span class="m">2</span> <span class="nf">-</span> <span class="p">(</span><span class="m">30px</span> <span class="o">-</span> <span class="m">30px</span> <span class="o">*</span> <span class="m">1</span><span class="o">/</span><span class="m">2</span><span class="p">));</span> <span class="p">}</span>
</code></pre>
</div>

<p>Hopefully they‚Äôll get you started with your favorite build tool and PostCSS plugins. If you have any questions about how to add more PostCSS plugins, or use a particular preprocessor with these solutions, just ping me via GitHub <a href="https://github.com/corysimmons/postcss-ant/issues">issues</a> and we can work through it together (then improve these docs).</p>

<p>A lot of the examples have a lot of similar steps. Here is what they all do:</p>

<ul>
  <li><code class="highlighter-rouge">mkdir -p ~/Desktop/playground/ant/foo</code> (creates a dummy directory to test these examples out before fighting with them in a real-world project)</li>
  <li><code class="highlighter-rouge">cd ~/Desktop/playground/ant/postcss-cli</code></li>
  <li><code class="highlighter-rouge">echo '{}' &gt; package.json</code> (creates a valid JSON <code class="highlighter-rouge">package.json</code> so we can save npm packages to it)</li>
  <li><code class="highlighter-rouge">npm i -D ... ...</code> (installs packages from npm and saves them to <code class="highlighter-rouge">package.json</code> as development dependencies)</li>
  <li><code class="highlighter-rouge">echo 'a { width: ant(1/2)[1]; }' &gt; in.css</code> (creates a stylesheet with a really basic ant function)</li>
</ul>

<h2 id="postcss-cli">postcss-cli</h2>

<ul>
  <li><code class="highlighter-rouge">mkdir -p ~/Desktop/playground/ant/postcss-cli</code></li>
  <li><code class="highlighter-rouge">cd ~/Desktop/playground/ant/postcss-cli</code></li>
  <li><code class="highlighter-rouge">echo '{}' &gt; package.json</code></li>
  <li><code class="highlighter-rouge">npm i -D postcss-cli postcss-ant</code></li>
  <li><code class="highlighter-rouge">echo 'a { width: ant(1/2)[1]; }' &gt; in.css</code></li>
  <li><code class="highlighter-rouge">node_modules/.bin/postcss -u postcss-ant -w -o out.css in.css</code></li>
</ul>

<h2 id="nodejs">Node.js</h2>

<ul>
  <li><code class="highlighter-rouge">mkdir -p ~/Desktop/playground/ant/node</code></li>
  <li><code class="highlighter-rouge">cd ~/Desktop/playground/ant/node</code></li>
  <li><code class="highlighter-rouge">echo '{}' &gt; package.json</code></li>
  <li><code class="highlighter-rouge">npm i -D postcss-ant</code></li>
  <li><code class="highlighter-rouge">echo 'a { width: ant(1/2)[1]; }' &gt; in.css</code></li>
</ul>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// index.js</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'fs'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">postcss</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'postcss'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ant</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'postcss-ant'</span><span class="p">);</span>

<span class="nx">fs</span><span class="p">.</span><span class="nx">writeFileSync</span><span class="p">(</span><span class="s1">'out.css'</span><span class="p">,</span> <span class="nx">postcss</span><span class="p">(</span><span class="nx">ant</span><span class="p">).</span><span class="nx">process</span><span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">'in.css'</span><span class="p">,</span> <span class="s1">'utf8'</span><span class="p">)).</span><span class="nx">css</span><span class="p">);</span>
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">node index</code></li>
</ul>

<h2 id="gulp">Gulp</h2>

<ul>
  <li><code class="highlighter-rouge">mkdir -p ~/Desktop/playground/ant/gulp/src</code></li>
  <li><code class="highlighter-rouge">cd ~/Desktop/playground/ant/gulp</code></li>
  <li><code class="highlighter-rouge">echo '{}' &gt; package.json</code></li>
  <li><code class="highlighter-rouge">npm i -D gulp gulp-postcss postcss-ant</code></li>
  <li><code class="highlighter-rouge">echo 'a { width: ant(1/2)[1]; }' &gt; src/style.css</code></li>
</ul>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// gulpfile.js</span>
<span class="kd">var</span> <span class="nx">postcss</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-postcss'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ant</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'postcss-ant'</span><span class="p">);</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s1">'./src/style.css'</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">postcss</span><span class="p">([</span><span class="nx">ant</span><span class="p">]))</span>
      <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s1">'./dist'</span><span class="p">));</span>
<span class="p">});</span>
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">gulp</code></li>
</ul>

<h2 id="contribute-your-own-integration">Contribute Your Own Integration</h2>

<p>I love learning/teaching about a plethora of integrations. I‚Äôd love to see some integrations for Webpack, Browserify, Brunch, etc.</p>

<p>If you‚Äôre proficient in these tools and could provide terse step-by-step directions (like above) for using ant in these environments I would really appreciate you contributing your knowledge via a GitHub <a href="https://github.com/corysimmons/postcss-ant/issues/new">issue</a>.</p>

      </main>
    </div>

    <script src="/postcss-ant/js/lib/zepto.min.js"></script>
    <script src="/postcss-ant/js/main.js"></script>
  </body>
</html>
